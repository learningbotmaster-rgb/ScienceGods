    <!-- Auto-Redirect & Safety Script -->
    <script>
        (function () {
            const leaveButton = document.getElementById('leaveSiteButton');
            let hasLeftSite = false;

            const leaveSite = () => {
                if (hasLeftSite) return;
                hasLeftSite = true;
                
                // Force save before leaving
                try {
                    if (window.persistBrowserSave) {
                        window.persistBrowserSave();
                    }
                } catch (e) {
                    // Ignore save errors during panic exit
                }

                // Redirect immediately using replace to overwrite history
                window.location.replace('https://www.google.com');
            };

            if (leaveButton) {
                leaveButton.addEventListener('click', leaveSite);
            }

            // Trigger when tab is switched or window is minimized
            document.addEventListener('visibilitychange', () => {
                if (document.visibilityState === 'hidden') {
                    leaveSite();
                }
            });
            
            // Trigger on page hide (handles some mobile/browser close events better)
            window.addEventListener('pagehide', () => {
                leaveSite();
            });

            // Handle common close shortcuts
            window.addEventListener('keydown', (event) => {
                const key = (event.key || '').toLowerCase();
                // Check for Ctrl+W (Windows/Linux) or Cmd+W (Mac) or Alt+F4
                if ((key === 'w' && (event.ctrlKey || event.metaKey)) || 
                    (key === 'f4' && (event.altKey))) {
                    event.preventDefault(); // Try to prevent default close to allow redirect
                    leaveSite();
                }
            });
        })();
    </script>
  </body>
</html>
